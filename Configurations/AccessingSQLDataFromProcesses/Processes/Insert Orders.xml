<?xml version="1.0" encoding="utf-8"?>
<ESBMessagePipelineStorage xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <Id>ed7cad39-23ab-4f28-b785-12ec67d5b256</Id>
  <Version>c9439a9d-977f-4d7e-a75d-0819e786b55c</Version>
  <BusinessFlows />
  <ProcessFlows />
  <Description />
  <Name>Insert Orders</Name>
  <IsSystemObject>false</IsSystemObject>
  <IsPrivate>false</IsPrivate>
  <IsEncrypted>true</IsEncrypted>
  <PipelineBlob>&lt;ESBMessagePipeline xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.neuronesb.com/pipelines/"&gt;&lt;AuditStepAdded&gt;StepNotAdded&lt;/AuditStepAdded&gt;&lt;Category i:nil="true" /&gt;&lt;Description i:nil="true" /&gt;&lt;DisplayAudit&gt;false&lt;/DisplayAudit&gt;&lt;ExceptionStepAdded&gt;StepNotAdded&lt;/ExceptionStepAdded&gt;&lt;GlobalProperties xmlns:d2p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" /&gt;&lt;Name&gt;Insert Orders&lt;/Name&gt;&lt;ProcessType&gt;ProcessFragment&lt;/ProcessType&gt;&lt;Properties xmlns:d2p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" /&gt;&lt;ReferencedAssemblies xmlns:d2p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" i:nil="true" /&gt;&lt;Steps&gt;&lt;ESBMessagePipelineStep i:type="ExceptionPipelineStepOfESBMessagexAPWb1W4"&gt;&lt;Bindings xmlns:d4p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;eb09df4e-de95-4dbc-a5e4-89dca136024b&lt;/Id&gt;&lt;Name&gt;Try&lt;/Name&gt;&lt;Uniquename i:nil="true" /&gt;&lt;_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;false&lt;/_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;&lt;Catch&gt;&lt;Bindings xmlns:d5p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;e2f96b0c-9880-4f6b-a6f8-6867a9cfe4bc&lt;/Id&gt;&lt;Name&gt;Group&lt;/Name&gt;&lt;Uniquename i:nil="true" /&gt;&lt;_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;false&lt;/_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;&lt;Children&gt;&lt;ESBMessagePipelineStep i:type="ESBMessageCodePipelineStep"&gt;&lt;Bindings xmlns:d7p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;84f50a99-175b-4fcf-90e0-6094d806f600&lt;/Id&gt;&lt;Name&gt;Trace Exception&lt;/Name&gt;&lt;Uniquename i:nil="true" /&gt;&lt;_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;false&lt;/_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;&lt;BreakPointLines xmlns:d7p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" i:nil="true" /&gt;&lt;Code&gt;//get the pipeline exception
Exception ex = (PipelineException)context.Properties["PipelineException"];
string msg = "Exception: ";
if (ex.InnerException != null)
{
    msg += ex.InnerException.Message;
}
else
{
    msg += ex.Message;
}

//trace to designer window
context.Instance.TraceError(msg);&lt;/Code&gt;&lt;ReferencedAssemblies xmlns:d7p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"&gt;&lt;d7p1:string&gt;Neuron&lt;/d7p1:string&gt;&lt;d7p1:string&gt;Neuron.NetX&lt;/d7p1:string&gt;&lt;d7p1:string&gt;Neuron.Pipelines.Activities, Version=1.0.0.0, Culture=neutral, PublicKeyToken=ed764b6eccb2f6cc&lt;/d7p1:string&gt;&lt;d7p1:string&gt;Neuron.Pipelines.Activities2, Version=1.0.0.0, Culture=neutral, PublicKeyToken=ed764b6eccb2f6cc&lt;/d7p1:string&gt;&lt;d7p1:string&gt;Log4netProviderStandard, Version=1.0.0.0, Culture=neutral, PublicKeyToken=ed764b6eccb2f6cc&lt;/d7p1:string&gt;&lt;d7p1:string&gt;mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d7p1:string&gt;&lt;d7p1:string&gt;System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d7p1:string&gt;&lt;d7p1:string&gt;System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d7p1:string&gt;&lt;d7p1:string&gt;System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d7p1:string&gt;&lt;d7p1:string&gt;System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d7p1:string&gt;&lt;d7p1:string&gt;System.Xml.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d7p1:string&gt;&lt;d7p1:string&gt;System.Collections, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d7p1:string&gt;&lt;d7p1:string&gt;System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d7p1:string&gt;&lt;d7p1:string&gt;System.Data.DataSetExtensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d7p1:string&gt;&lt;d7p1:string&gt;System.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d7p1:string&gt;&lt;d7p1:string&gt;System.Runtime, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d7p1:string&gt;&lt;d7p1:string&gt;System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d7p1:string&gt;&lt;d7p1:string&gt;System.Threading, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d7p1:string&gt;&lt;d7p1:string&gt;Newtonsoft.Json, Version=13.0.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed&lt;/d7p1:string&gt;&lt;d7p1:string&gt;Microsoft.CSharp, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d7p1:string&gt;&lt;d7p1:string&gt;mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d7p1:string&gt;&lt;/ReferencedAssemblies&gt;&lt;TypeName&gt;Type3b4b2d633b94d979e068ec309c062f&lt;/TypeName&gt;&lt;/ESBMessagePipelineStep&gt;&lt;ESBMessagePipelineStep xmlns:d6p1="http://schemas.neuronesb.com/pipelines/esb/" i:type="d6p1:EsbMessagePipelineExecutionPipelineStep"&gt;&lt;Bindings xmlns:d7p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;090863df-39bf-4db2-ae73-ee3368cd06f6&lt;/Id&gt;&lt;Name&gt;Process Exception&lt;/Name&gt;&lt;Uniquename i:nil="true" /&gt;&lt;_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;false&lt;/_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;&lt;d6p1:FileName i:nil="true" /&gt;&lt;d6p1:MaxInstances&gt;100&lt;/d6p1:MaxInstances&gt;&lt;d6p1:PipelineName&gt;Exception Handling&lt;/d6p1:PipelineName&gt;&lt;d6p1:PoolTimeout&gt;PT1M&lt;/d6p1:PoolTimeout&gt;&lt;/ESBMessagePipelineStep&gt;&lt;/Children&gt;&lt;/Catch&gt;&lt;Finally&gt;&lt;Bindings xmlns:d5p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;2448fa3e-2457-4085-933a-e4c2cfac0f6b&lt;/Id&gt;&lt;Name&gt;Group&lt;/Name&gt;&lt;Uniquename i:nil="true" /&gt;&lt;_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;false&lt;/_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;&lt;Children&gt;&lt;ESBMessagePipelineStep i:type="CancelPipelineStepOfESBMessagexAPWb1W4"&gt;&lt;Bindings xmlns:d7p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;7c74b3a9-4733-4395-9830-87c8406ae870&lt;/Id&gt;&lt;Name&gt;Cancel&lt;/Name&gt;&lt;Uniquename i:nil="true" /&gt;&lt;_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;false&lt;/_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;&lt;/ESBMessagePipelineStep&gt;&lt;/Children&gt;&lt;/Finally&gt;&lt;Try&gt;&lt;Bindings xmlns:d5p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;2c2fc297-5575-4149-bd85-31eb5a5833b9&lt;/Id&gt;&lt;Name&gt;Group&lt;/Name&gt;&lt;Uniquename i:nil="true" /&gt;&lt;_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;false&lt;/_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;&lt;Children&gt;&lt;ESBMessagePipelineStep i:type="TransactionPipelineStepOfESBMessagexAPWb1W4"&gt;&lt;Bindings xmlns:d7p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;86f2d637-1eca-4870-941b-743e55ac1288&lt;/Id&gt;&lt;Name&gt;Transaction&lt;/Name&gt;&lt;Uniquename i:nil="true" /&gt;&lt;_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;false&lt;/_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;&lt;Children&gt;&lt;ESBMessagePipelineStep i:type="SplitterPipelineStepOfESBMessageESBMessageu6r3vdAt"&gt;&lt;Bindings xmlns:d9p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;f4bcb3ed-f4d0-48cf-8c30-e523408328c5&lt;/Id&gt;&lt;Name&gt;Splitter`2&lt;/Name&gt;&lt;Uniquename i:nil="true" /&gt;&lt;_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;false&lt;/_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;&lt;Aggregator i:type="NullAggregatorOfESBMessageESBMessageu6r3vdAt" /&gt;&lt;Executor i:type="SynchronousSplitExecutorOfESBMessagexAPWb1W4" /&gt;&lt;ForEach&gt;&lt;Bindings xmlns:d10p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;21719296-3d04-4bc0-8839-4063c5402cc4&lt;/Id&gt;&lt;Name&gt;Group&lt;/Name&gt;&lt;Uniquename i:nil="true" /&gt;&lt;_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;false&lt;/_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;&lt;Children&gt;&lt;ESBMessagePipelineStep xmlns:d11p1="http://schemas.neuronesb.com/pipelines/esb/" i:type="d11p1:EsbMessageTraceMessagePipelineStep"&gt;&lt;Bindings xmlns:d12p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;0ec6a831-2665-4d3d-872a-9940a7291b52&lt;/Id&gt;&lt;Name&gt;TraceMessage&lt;/Name&gt;&lt;Uniquename i:nil="true" /&gt;&lt;_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;false&lt;/_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;&lt;/ESBMessagePipelineStep&gt;&lt;ESBMessagePipelineStep xmlns:d11p1="http://schemas.neuronesb.com/pipelines/esb/" i:type="d11p1:EsbMessageStorePipelineStep"&gt;&lt;Bindings xmlns:d12p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;e3d94d47-35e9-42db-b0f7-8314729df2e3&lt;/Id&gt;&lt;Name&gt;Insert Order&lt;/Name&gt;&lt;Uniquename i:nil="true" /&gt;&lt;_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;false&lt;/_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;&lt;Command&gt;StoreOrderItem&lt;/Command&gt;&lt;CommandTimeout&gt;0&lt;/CommandTimeout&gt;&lt;CommandType&gt;StoredProcedure&lt;/CommandType&gt;&lt;ConnectionString&gt;Data Source=.;Initial Catalog=MessageData;Integrated Security=True;Persist Security Info=False;&lt;/ConnectionString&gt;&lt;ConnectionTimeout&gt;0&lt;/ConnectionTimeout&gt;&lt;Parameters&gt;&lt;StoreParameter&gt;&lt;DefaultValue i:nil="true" /&gt;&lt;ParameterName&gt;@OrderID&lt;/ParameterName&gt;&lt;SelectionType&gt;Element&lt;/SelectionType&gt;&lt;SelectionValue&gt;OrderID&lt;/SelectionValue&gt;&lt;/StoreParameter&gt;&lt;StoreParameter&gt;&lt;DefaultValue /&gt;&lt;ParameterName&gt;@OrderDate&lt;/ParameterName&gt;&lt;SelectionType&gt;Element&lt;/SelectionType&gt;&lt;SelectionValue&gt;OrderDate&lt;/SelectionValue&gt;&lt;/StoreParameter&gt;&lt;StoreParameter&gt;&lt;DefaultValue&gt;0.00&lt;/DefaultValue&gt;&lt;ParameterName&gt;@OrderAmount&lt;/ParameterName&gt;&lt;SelectionType&gt;None&lt;/SelectionType&gt;&lt;SelectionValue /&gt;&lt;/StoreParameter&gt;&lt;/Parameters&gt;&lt;XPath&gt;Order&lt;/XPath&gt;&lt;/ESBMessagePipelineStep&gt;&lt;ESBMessagePipelineStep xmlns:d11p1="http://schemas.neuronesb.com/pipelines/esb/" i:type="d11p1:EsbMessageStorePipelineStep"&gt;&lt;Bindings xmlns:d12p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;6d9e90f1-55f0-4967-b9e9-3960dc02ec39&lt;/Id&gt;&lt;Name&gt;Update Order Amount&lt;/Name&gt;&lt;Uniquename i:nil="true" /&gt;&lt;_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;false&lt;/_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;&lt;Command&gt;update [Order] set OrderAmount=@OrderAmount where OrderID=@OrderID&lt;/Command&gt;&lt;CommandTimeout&gt;0&lt;/CommandTimeout&gt;&lt;CommandType&gt;Text&lt;/CommandType&gt;&lt;ConnectionString&gt;Data Source=.;Initial Catalog=MessageData;Integrated Security=True;Persist Security Info=False;&lt;/ConnectionString&gt;&lt;ConnectionTimeout&gt;0&lt;/ConnectionTimeout&gt;&lt;Parameters&gt;&lt;StoreParameter&gt;&lt;DefaultValue i:nil="true" /&gt;&lt;ParameterName&gt;@OrderAmount&lt;/ParameterName&gt;&lt;SelectionType&gt;XPath&lt;/SelectionType&gt;&lt;SelectionValue&gt;OrderAmount/text()&lt;/SelectionValue&gt;&lt;/StoreParameter&gt;&lt;StoreParameter&gt;&lt;DefaultValue i:nil="true" /&gt;&lt;ParameterName&gt;@OrderID&lt;/ParameterName&gt;&lt;SelectionType&gt;XPath&lt;/SelectionType&gt;&lt;SelectionValue&gt;OrderID/text()&lt;/SelectionValue&gt;&lt;/StoreParameter&gt;&lt;/Parameters&gt;&lt;XPath&gt;Order&lt;/XPath&gt;&lt;/ESBMessagePipelineStep&gt;&lt;/Children&gt;&lt;/ForEach&gt;&lt;MaxThreadCount&gt;10&lt;/MaxThreadCount&gt;&lt;Splitter xmlns:d9p1="http://schemas.neuronesb.com/pipelines/esb/" i:type="d9p1:XPathEsbMessageSplitter"&gt;&lt;d9p1:XPath&gt;Orders/Order&lt;/d9p1:XPath&gt;&lt;/Splitter&gt;&lt;turnOffTrackExecution&gt;false&lt;/turnOffTrackExecution&gt;&lt;/ESBMessagePipelineStep&gt;&lt;/Children&gt;&lt;IsolationLevel&gt;Serializable&lt;/IsolationLevel&gt;&lt;Timeout&gt;PT0S&lt;/Timeout&gt;&lt;/ESBMessagePipelineStep&gt;&lt;/Children&gt;&lt;/Try&gt;&lt;/ESBMessagePipelineStep&gt;&lt;/Steps&gt;&lt;/ESBMessagePipeline&gt;</PipelineBlob>
  <IsProcessFlow>false</IsProcessFlow>
</ESBMessagePipelineStorage>