<?xml version="1.0" encoding="utf-8"?>
<ESBMessagePipelineStorage xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <Id>eba4e57f-39c7-4635-96e4-fe34879fc956</Id>
  <Version>b840b8fb-a4a8-478f-87ed-a51d83f651b1</Version>
  <BusinessFlows />
  <ProcessFlows />
  <Description />
  <Name>Dynamic Topic Routing - Content</Name>
  <Group />
  <IsSystemObject>false</IsSystemObject>
  <IsPrivate>false</IsPrivate>
  <IsEncrypted>true</IsEncrypted>
  <PipelineBlob>&lt;ESBMessagePipeline xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.neuronesb.com/pipelines/"&gt;&lt;AuditStepAdded&gt;StepNotAdded&lt;/AuditStepAdded&gt;&lt;Category i:nil="true" /&gt;&lt;Description /&gt;&lt;DisplayAudit&gt;false&lt;/DisplayAudit&gt;&lt;ExceptionStepAdded&gt;StepNotAdded&lt;/ExceptionStepAdded&gt;&lt;GlobalProperties xmlns:d2p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"&gt;&lt;d2p1:KeyValueOfstringanyType&gt;&lt;d2p1:Key&gt;NeuronProcess&lt;/d2p1:Key&gt;&lt;d2p1:Value xmlns:d4p1="http://www.w3.org/2001/XMLSchema" i:type="d4p1:string"&gt;Process&lt;/d2p1:Value&gt;&lt;/d2p1:KeyValueOfstringanyType&gt;&lt;/GlobalProperties&gt;&lt;Name&gt;Dynamic Topic Routing - Content&lt;/Name&gt;&lt;ProcessType&gt;ProcessFragment&lt;/ProcessType&gt;&lt;Properties xmlns:d2p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" /&gt;&lt;ReferencedAssemblies xmlns:d2p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"&gt;&lt;d2p1:string&gt;System.Diagnostics.TraceSource, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d2p1:string&gt;&lt;/ReferencedAssemblies&gt;&lt;Steps&gt;&lt;ESBMessagePipelineStep i:type="ExceptionPipelineStepOfESBMessagexAPWb1W4"&gt;&lt;Bindings xmlns:d4p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;0fc6a534-3e1e-4dba-a1f0-26c1faec19ef&lt;/Id&gt;&lt;Name&gt;Exception&lt;/Name&gt;&lt;Uniquename /&gt;&lt;_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;false&lt;/_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;&lt;Catch&gt;&lt;Bindings xmlns:d5p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;c6a9b296-06ab-483d-a6a7-e9d6823010cf&lt;/Id&gt;&lt;Name&gt;Group&lt;/Name&gt;&lt;Uniquename /&gt;&lt;_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;false&lt;/_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;&lt;Children&gt;&lt;ESBMessagePipelineStep xmlns:d6p1="http://schemas.neuronesb.com/pipelines/esb/" i:type="d6p1:EsbMessagePipelineExecutionPipelineStep"&gt;&lt;Bindings xmlns:d7p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;ee7151a8-b2ea-48df-9fb8-b399a88a6cef&lt;/Id&gt;&lt;Name&gt;Process Exception&lt;/Name&gt;&lt;Uniquename /&gt;&lt;_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;false&lt;/_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;&lt;d6p1:FileName /&gt;&lt;d6p1:MaxInstances&gt;100&lt;/d6p1:MaxInstances&gt;&lt;d6p1:PipelineName&gt;Exception Handling&lt;/d6p1:PipelineName&gt;&lt;d6p1:PoolTimeout&gt;PT1M&lt;/d6p1:PoolTimeout&gt;&lt;/ESBMessagePipelineStep&gt;&lt;/Children&gt;&lt;/Catch&gt;&lt;Finally&gt;&lt;Bindings xmlns:d5p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;c0aca5b1-9625-4505-9634-531552a8890f&lt;/Id&gt;&lt;Name&gt;Group&lt;/Name&gt;&lt;Uniquename /&gt;&lt;_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;false&lt;/_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;&lt;Children&gt;&lt;ESBMessagePipelineStep i:type="CancelPipelineStepOfESBMessagexAPWb1W4"&gt;&lt;Bindings xmlns:d7p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;69dbc874-7063-4d22-b586-0be776790b20&lt;/Id&gt;&lt;Name&gt;End Message&lt;/Name&gt;&lt;Uniquename /&gt;&lt;_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;false&lt;/_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;&lt;/ESBMessagePipelineStep&gt;&lt;/Children&gt;&lt;/Finally&gt;&lt;Try&gt;&lt;Bindings xmlns:d5p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;2d1824a8-a5d4-49bf-a7c6-958db1d9b17c&lt;/Id&gt;&lt;Name&gt;Group&lt;/Name&gt;&lt;Uniquename /&gt;&lt;_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;false&lt;/_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;&lt;Children&gt;&lt;ESBMessagePipelineStep xmlns:d6p1="http://schemas.neuronesb.com/pipelines/esb/" i:type="d6p1:EsbMessagePublishPipelineStep"&gt;&lt;Bindings xmlns:d7p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;0af4ffb5-5223-4567-89ee-1575bd6468aa&lt;/Id&gt;&lt;Name&gt;Contact Selector Pub&lt;/Name&gt;&lt;Uniquename /&gt;&lt;_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;false&lt;/_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;&lt;d6p1:Code&gt;//return topic
string topic = String.Empty;

try
{
	//get the message body contents as an Xml document
	System.Xml.XmlDocument doc = message.ToXmlDocument();
	System.Xml.XmlNode node = doc.SelectSingleNode("Contact[@type]");
	if(node != null &amp;amp;&amp;amp; node.Attributes != null &amp;amp;&amp;amp;
		node.Attributes["type"] != null)
	{
		if(node.Attributes["type"].Value.Equals("Sales"))
		{
			topic = "Contacts.Sales";
		}
		else if(node.Attributes["type"].Value.Equals("Vendor"))
		{
			topic = "Contacts.Vendor";
		}
	}
}
catch(Exception ex)
{
	System.Diagnostics.Trace.WriteLine("Exception occurred retrieving topic: " + ex.Message);
	topic = String.Empty;
}

if(String.IsNullOrEmpty(topic))
{
	System.Diagnostics.Trace.WriteLine("Failed to set topic");
}
return topic;&lt;/d6p1:Code&gt;&lt;d6p1:SelectorType&gt;Code&lt;/d6p1:SelectorType&gt;&lt;d6p1:Semantic&gt;Multicast&lt;/d6p1:Semantic&gt;&lt;d6p1:Timeout&gt;0&lt;/d6p1:Timeout&gt;&lt;d6p1:Topic i:nil="true" /&gt;&lt;d6p1:TopicSelector i:type="d6p1:ESBMessageCodeTopicSelector"&gt;&lt;d6p1:Code&gt;//return topic
string topic = String.Empty;

try
{
	//get the message body contents as an Xml document
	System.Xml.XmlDocument doc = message.ToXmlDocument();
	System.Xml.XmlNode node = doc.SelectSingleNode("Contact[@type]");
	if(node != null &amp;amp;&amp;amp; node.Attributes != null &amp;amp;&amp;amp;
		node.Attributes["type"] != null)
	{
		if(node.Attributes["type"].Value.Equals("Sales"))
		{
			topic = "Contacts.Sales";
		}
		else if(node.Attributes["type"].Value.Equals("Vendor"))
		{
			topic = "Contacts.Vendor";
		}
	}
}
catch(Exception ex)
{
	System.Diagnostics.Trace.WriteLine("Exception occurred retrieving topic: " + ex.Message);
	topic = String.Empty;
}

if(String.IsNullOrEmpty(topic))
{
	System.Diagnostics.Trace.WriteLine("Failed to set topic");
}
return topic;&lt;/d6p1:Code&gt;&lt;d6p1:ReferencedAssemblies xmlns:d8p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"&gt;&lt;d8p1:string&gt;Neuron&lt;/d8p1:string&gt;&lt;d8p1:string&gt;Neuron.NetX&lt;/d8p1:string&gt;&lt;d8p1:string&gt;Neuron.Pipelines.Activities, Version=1.0.0.0, Culture=neutral, PublicKeyToken=ed764b6eccb2f6cc&lt;/d8p1:string&gt;&lt;d8p1:string&gt;Neuron.Pipelines.Activities2, Version=1.0.0.0, Culture=neutral, PublicKeyToken=ed764b6eccb2f6cc&lt;/d8p1:string&gt;&lt;d8p1:string&gt;Log4netProviderStandard, Version=1.0.0.0, Culture=neutral, PublicKeyToken=ed764b6eccb2f6cc&lt;/d8p1:string&gt;&lt;d8p1:string&gt;mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Xml.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Collections, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Data.DataSetExtensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Runtime, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Threading, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d8p1:string&gt;&lt;d8p1:string&gt;Newtonsoft.Json, Version=13.0.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed&lt;/d8p1:string&gt;&lt;d8p1:string&gt;Microsoft.CSharp, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d8p1:string&gt;&lt;d8p1:string&gt;mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Linq.Queryable, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Linq.Queryable, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d8p1:string&gt;&lt;/d6p1:ReferencedAssemblies&gt;&lt;/d6p1:TopicSelector&gt;&lt;/ESBMessagePipelineStep&gt;&lt;/Children&gt;&lt;/Try&gt;&lt;/ESBMessagePipelineStep&gt;&lt;/Steps&gt;&lt;/ESBMessagePipeline&gt;</PipelineBlob>
  <IsProcessFlow>false</IsProcessFlow>
</ESBMessagePipelineStorage>