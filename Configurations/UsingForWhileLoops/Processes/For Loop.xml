<?xml version="1.0" encoding="utf-8"?>
<ESBMessagePipelineStorage xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <Id>c74d8ac7-6b1b-4fe8-93d6-9a78f95a46e1</Id>
  <Version>f378c641-922a-4010-b2e9-f28e0285d260</Version>
  <BusinessFlows />
  <ProcessFlows />
  <Description />
  <Name>For Loop</Name>
  <IsSystemObject>false</IsSystemObject>
  <IsPrivate>false</IsPrivate>
  <IsEncrypted>true</IsEncrypted>
  <PipelineBlob>&lt;ESBMessagePipeline xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.neuronesb.com/pipelines/"&gt;&lt;AuditStepAdded&gt;StepNotAdded&lt;/AuditStepAdded&gt;&lt;Category i:nil="true" /&gt;&lt;Description i:nil="true" /&gt;&lt;DisplayAudit&gt;false&lt;/DisplayAudit&gt;&lt;ExceptionStepAdded&gt;StepNotAdded&lt;/ExceptionStepAdded&gt;&lt;GlobalProperties xmlns:d2p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"&gt;&lt;d2p1:KeyValueOfstringanyType&gt;&lt;d2p1:Key&gt;NeuronProcess&lt;/d2p1:Key&gt;&lt;d2p1:Value xmlns:d4p1="http://www.w3.org/2001/XMLSchema" i:type="d4p1:string"&gt;Process&lt;/d2p1:Value&gt;&lt;/d2p1:KeyValueOfstringanyType&gt;&lt;/GlobalProperties&gt;&lt;Name&gt;For Loop&lt;/Name&gt;&lt;ProcessType&gt;ProcessFragment&lt;/ProcessType&gt;&lt;Properties xmlns:d2p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" /&gt;&lt;ReferencedAssemblies xmlns:d2p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" i:nil="true" /&gt;&lt;Steps&gt;&lt;ESBMessagePipelineStep i:type="ExceptionPipelineStepOfESBMessagexAPWb1W4"&gt;&lt;Bindings xmlns:d4p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" z:Id="i1" xmlns:z="http://schemas.microsoft.com/2003/10/Serialization/" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;f8c703d0-57ab-4717-9e85-59393aa2a2ec&lt;/Id&gt;&lt;Name&gt;Exception&lt;/Name&gt;&lt;Uniquename /&gt;&lt;_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;false&lt;/_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;&lt;Catch&gt;&lt;Bindings xmlns:d5p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" z:Id="i2" xmlns:z="http://schemas.microsoft.com/2003/10/Serialization/" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;df444a96-51c3-45d9-a046-98335a2f1d82&lt;/Id&gt;&lt;Name&gt;Group&lt;/Name&gt;&lt;Uniquename /&gt;&lt;_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;false&lt;/_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;&lt;Children&gt;&lt;ESBMessagePipelineStep xmlns:d6p1="http://schemas.neuronesb.com/pipelines/esb/" i:type="d6p1:EsbMessagePipelineExecutionPipelineStep"&gt;&lt;Bindings xmlns:d7p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" z:Id="i3" xmlns:z="http://schemas.microsoft.com/2003/10/Serialization/" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;ce21b6d4-7ae4-4298-ac87-a27e0e73f867&lt;/Id&gt;&lt;Name&gt;Process Exception&lt;/Name&gt;&lt;Uniquename /&gt;&lt;_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;false&lt;/_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;&lt;d6p1:FileName /&gt;&lt;d6p1:MaxInstances&gt;100&lt;/d6p1:MaxInstances&gt;&lt;d6p1:PipelineName&gt;Exception Handling&lt;/d6p1:PipelineName&gt;&lt;d6p1:PoolTimeout&gt;PT1M&lt;/d6p1:PoolTimeout&gt;&lt;/ESBMessagePipelineStep&gt;&lt;/Children&gt;&lt;/Catch&gt;&lt;Finally&gt;&lt;Bindings xmlns:d5p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" z:Id="i4" xmlns:z="http://schemas.microsoft.com/2003/10/Serialization/" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;5b851f02-f46a-41ee-895c-461d0b854446&lt;/Id&gt;&lt;Name&gt;Group&lt;/Name&gt;&lt;Uniquename /&gt;&lt;_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;false&lt;/_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;&lt;Children&gt;&lt;ESBMessagePipelineStep i:type="CancelPipelineStepOfESBMessagexAPWb1W4"&gt;&lt;Bindings xmlns:d7p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" z:Id="i5" xmlns:z="http://schemas.microsoft.com/2003/10/Serialization/" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;c0f7535b-d49b-4e3a-a2eb-3d81a8785d08&lt;/Id&gt;&lt;Name&gt;Cancel&lt;/Name&gt;&lt;Uniquename /&gt;&lt;_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;false&lt;/_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;&lt;/ESBMessagePipelineStep&gt;&lt;/Children&gt;&lt;/Finally&gt;&lt;Try&gt;&lt;Bindings xmlns:d5p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" z:Id="i6" xmlns:z="http://schemas.microsoft.com/2003/10/Serialization/" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;54b8cf87-6956-4b3a-8977-04edc9ef88f9&lt;/Id&gt;&lt;Name&gt;Group&lt;/Name&gt;&lt;Uniquename /&gt;&lt;_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;false&lt;/_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;&lt;Children&gt;&lt;ESBMessagePipelineStep i:type="PushContextPipelineStepOfESBMessagexAPWb1W4"&gt;&lt;Bindings xmlns:d7p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" z:Id="i7" xmlns:z="http://schemas.microsoft.com/2003/10/Serialization/" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;ab400e26-6a55-4864-9fb1-a6448465f361&lt;/Id&gt;&lt;Name&gt;PushContext&lt;/Name&gt;&lt;Uniquename /&gt;&lt;_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;false&lt;/_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;&lt;/ESBMessagePipelineStep&gt;&lt;ESBMessagePipelineStep xmlns:d6p1="http://schemas.neuronesb.com/pipelines/esb/" i:type="d6p1:EsbMessageXmlQueryPipelineStep"&gt;&lt;Bindings xmlns:d7p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" z:Id="i8" xmlns:z="http://schemas.microsoft.com/2003/10/Serialization/" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;2a579e5d-41b7-4b25-a86e-3b1a888c5296&lt;/Id&gt;&lt;Name&gt;Get Customer List&lt;/Name&gt;&lt;Uniquename /&gt;&lt;_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;false&lt;/_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;&lt;Command xmlns="http://schemas.datacontract.org/2004/07/Neuron.Esb.Pipelines"&gt;SELECT * FROM [Customer] FOR XML AUTO, ELEMENTS, ROOT ('Customers')&lt;/Command&gt;&lt;CommandTimeout xmlns="http://schemas.datacontract.org/2004/07/Neuron.Esb.Pipelines"&gt;0&lt;/CommandTimeout&gt;&lt;CommandType xmlns="http://schemas.datacontract.org/2004/07/Neuron.Esb.Pipelines"&gt;Text&lt;/CommandType&gt;&lt;ConnectionString xmlns="http://schemas.datacontract.org/2004/07/Neuron.Esb.Pipelines"&gt;Data Source=.;Initial Catalog=MessageData;Integrated Security=True;Connection Timeout=15&lt;/ConnectionString&gt;&lt;ConnectionTimeout xmlns="http://schemas.datacontract.org/2004/07/Neuron.Esb.Pipelines"&gt;0&lt;/ConnectionTimeout&gt;&lt;Parameters xmlns="http://schemas.datacontract.org/2004/07/Neuron.Esb.Pipelines" /&gt;&lt;XPath xmlns="http://schemas.datacontract.org/2004/07/Neuron.Esb.Pipelines" /&gt;&lt;/ESBMessagePipelineStep&gt;&lt;ESBMessagePipelineStep xmlns:d6p1="http://schemas.neuronesb.com/pipelines/esb/" i:type="d6p1:EsbMessageCSharpCodePipelineStep"&gt;&lt;Bindings xmlns:d7p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" z:Id="i9" xmlns:z="http://schemas.microsoft.com/2003/10/Serialization/" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;cab55d8a-6b22-408a-83e5-ee8325696223&lt;/Id&gt;&lt;Name&gt;Set Email List Property&lt;/Name&gt;&lt;Uniquename /&gt;&lt;_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;false&lt;/_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;&lt;BreakPointLines xmlns:d7p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" /&gt;&lt;Code&gt;System.Collections.Generic.List&amp;lt;String&amp;gt; emailAddresses = new System.Collections.Generic.List&amp;lt;String&amp;gt;();
System.Xml.XmlDocument xml = context.Data.ToXmlDocument();
System.Xml.XmlNodeList nodeList = xml.SelectNodes("Customers/Customer");
foreach (System.Xml.XmlNode node in nodeList)
{
    emailAddresses.Add(node.SelectSingleNode("EmailAddress").InnerText);
}

context.Properties.Add("EmailAddresses", emailAddresses);&lt;/Code&gt;&lt;ReferencedAssemblies xmlns:d7p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"&gt;&lt;d7p1:string&gt;Neuron&lt;/d7p1:string&gt;&lt;d7p1:string&gt;Neuron.NetX&lt;/d7p1:string&gt;&lt;d7p1:string&gt;Neuron.Pipelines.Activities&lt;/d7p1:string&gt;&lt;d7p1:string&gt;Neuron.Pipelines.Activities2&lt;/d7p1:string&gt;&lt;d7p1:string&gt;System.Runtime, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d7p1:string&gt;&lt;d7p1:string&gt;System.Linq, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d7p1:string&gt;&lt;d7p1:string&gt;System.Linq.Queryable, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d7p1:string&gt;&lt;d7p1:string&gt;System.Linq.Expressions, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d7p1:string&gt;&lt;d7p1:string&gt;System.Xml.ReaderWriter, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d7p1:string&gt;&lt;d7p1:string&gt;System.Xml.XDocument, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d7p1:string&gt;&lt;d7p1:string&gt;System.Data.Common, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d7p1:string&gt;&lt;d7p1:string&gt;System.Runtime.Serialization.Primitives, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d7p1:string&gt;&lt;d7p1:string&gt;System.Collections, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d7p1:string&gt;&lt;d7p1:string&gt;System.Collections.NonGeneric, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d7p1:string&gt;&lt;d7p1:string&gt;System.Private.Xml, Version=8.0.0.0, Culture=neutral, PublicKeyToken=cc7b13ffcd2ddd51&lt;/d7p1:string&gt;&lt;d7p1:string&gt;System.Private.Xml.Linq, Version=8.0.0.0, Culture=neutral, PublicKeyToken=cc7b13ffcd2ddd51&lt;/d7p1:string&gt;&lt;d7p1:string&gt;Microsoft.CSharp, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d7p1:string&gt;&lt;d7p1:string&gt;Newtonsoft.Json, Version=13.0.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed&lt;/d7p1:string&gt;&lt;d7p1:string&gt;Neuron.Metabase.Admin, Version=1.0.0.0, Culture=neutral, PublicKeyToken=ed764b6eccb2f6cc&lt;/d7p1:string&gt;&lt;d7p1:string&gt;System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e&lt;/d7p1:string&gt;&lt;d7p1:string&gt;System.Runtime.Serialization.Xml, Version=0.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d7p1:string&gt;&lt;d7p1:string&gt;System.Private.DataContractSerialization, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d7p1:string&gt;&lt;d7p1:string&gt;System.ComponentModel.Primitives, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d7p1:string&gt;&lt;d7p1:string&gt;System.Collections.Concurrent, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d7p1:string&gt;&lt;d7p1:string&gt;System.Linq.Queryable, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d7p1:string&gt;&lt;d7p1:string&gt;System.Linq.Queryable, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d7p1:string&gt;&lt;/ReferencedAssemblies&gt;&lt;TypeName&gt;Type12db5ceb4a948dbb5772358669abbe&lt;/TypeName&gt;&lt;/ESBMessagePipelineStep&gt;&lt;ESBMessagePipelineStep i:type="PopContextPipelineStepOfESBMessagexAPWb1W4"&gt;&lt;Bindings xmlns:d7p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" z:Id="i10" xmlns:z="http://schemas.microsoft.com/2003/10/Serialization/" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;344f88f2-244f-4ede-98a7-167afd121c70&lt;/Id&gt;&lt;Name&gt;PopContext&lt;/Name&gt;&lt;Uniquename /&gt;&lt;_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;false&lt;/_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;&lt;/ESBMessagePipelineStep&gt;&lt;ESBMessagePipelineStep i:type="ForPipelineStepOfESBMessagexAPWb1W4"&gt;&lt;Bindings xmlns:d7p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" z:Id="i11" xmlns:z="http://schemas.microsoft.com/2003/10/Serialization/" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;2feccae7-e5e8-4aee-945c-d254b018db54&lt;/Id&gt;&lt;Name&gt;For&lt;/Name&gt;&lt;Uniquename /&gt;&lt;_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;false&lt;/_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;&lt;Children&gt;&lt;ESBMessagePipelineStep xmlns:d8p1="http://schemas.neuronesb.com/pipelines/esb/" i:type="d8p1:EsbMessageCSharpCodePipelineStep"&gt;&lt;Bindings xmlns:d9p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" z:Id="i12" xmlns:z="http://schemas.microsoft.com/2003/10/Serialization/" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;82946d21-c9e1-47ca-ae62-6a7b3828b7ee&lt;/Id&gt;&lt;Name&gt;Set Email Address&lt;/Name&gt;&lt;Uniquename /&gt;&lt;_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;false&lt;/_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;&lt;BreakPointLines xmlns:d9p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" /&gt;&lt;Code&gt;System.Collections.Generic.List&amp;lt;String&amp;gt; emailAddresses = (System.Collections.Generic.List&amp;lt;String&amp;gt;)context.Properties["EmailAddresses"];
int counter = (int)context.Properties["counter"];
context.Data.SetProperty("smtp", "To", emailAddresses[counter]);
// For the publish step to work while using the process tester, you need to set the source id to a valid publisher that has a subscription to the topic being published.
if (context.Runtime.DesignMode)
    context.Data.Header.SourceId = "OrderPublisher";
context.Instance.TraceInformation("Customer email address is " + emailAddresses[counter]);&lt;/Code&gt;&lt;ReferencedAssemblies xmlns:d9p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"&gt;&lt;d9p1:string&gt;Neuron&lt;/d9p1:string&gt;&lt;d9p1:string&gt;Neuron.NetX&lt;/d9p1:string&gt;&lt;d9p1:string&gt;Neuron.Pipelines.Activities&lt;/d9p1:string&gt;&lt;d9p1:string&gt;Neuron.Pipelines.Activities2&lt;/d9p1:string&gt;&lt;d9p1:string&gt;System.Runtime, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d9p1:string&gt;&lt;d9p1:string&gt;System.Linq, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d9p1:string&gt;&lt;d9p1:string&gt;System.Linq.Queryable, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d9p1:string&gt;&lt;d9p1:string&gt;System.Linq.Expressions, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d9p1:string&gt;&lt;d9p1:string&gt;System.Xml.ReaderWriter, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d9p1:string&gt;&lt;d9p1:string&gt;System.Xml.XDocument, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d9p1:string&gt;&lt;d9p1:string&gt;System.Data.Common, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d9p1:string&gt;&lt;d9p1:string&gt;System.Runtime.Serialization.Primitives, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d9p1:string&gt;&lt;d9p1:string&gt;System.Collections, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d9p1:string&gt;&lt;d9p1:string&gt;System.Collections.NonGeneric, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d9p1:string&gt;&lt;d9p1:string&gt;System.Private.Xml, Version=8.0.0.0, Culture=neutral, PublicKeyToken=cc7b13ffcd2ddd51&lt;/d9p1:string&gt;&lt;d9p1:string&gt;System.Private.Xml.Linq, Version=8.0.0.0, Culture=neutral, PublicKeyToken=cc7b13ffcd2ddd51&lt;/d9p1:string&gt;&lt;d9p1:string&gt;Microsoft.CSharp, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d9p1:string&gt;&lt;d9p1:string&gt;Newtonsoft.Json, Version=13.0.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed&lt;/d9p1:string&gt;&lt;d9p1:string&gt;Neuron.Metabase.Admin, Version=1.0.0.0, Culture=neutral, PublicKeyToken=ed764b6eccb2f6cc&lt;/d9p1:string&gt;&lt;d9p1:string&gt;System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e&lt;/d9p1:string&gt;&lt;d9p1:string&gt;System.Runtime.Serialization.Xml, Version=0.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d9p1:string&gt;&lt;d9p1:string&gt;System.Private.DataContractSerialization, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d9p1:string&gt;&lt;d9p1:string&gt;System.ComponentModel.Primitives, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d9p1:string&gt;&lt;d9p1:string&gt;System.Collections.Concurrent, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d9p1:string&gt;&lt;d9p1:string&gt;System.Linq.Queryable, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d9p1:string&gt;&lt;d9p1:string&gt;System.Linq.Queryable, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d9p1:string&gt;&lt;/ReferencedAssemblies&gt;&lt;TypeName&gt;Type050846d1c1d4f60b84aed1615cfdfa&lt;/TypeName&gt;&lt;/ESBMessagePipelineStep&gt;&lt;ESBMessagePipelineStep xmlns:d8p1="http://schemas.neuronesb.com/pipelines/esb/" i:type="d8p1:EsbMessagePublishPipelineStep"&gt;&lt;Bindings xmlns:d9p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" z:Id="i13" xmlns:z="http://schemas.microsoft.com/2003/10/Serialization/" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;6a291011-6e46-42d9-9a20-593ebce8c32d&lt;/Id&gt;&lt;Name&gt;Publish&lt;/Name&gt;&lt;Uniquename /&gt;&lt;_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;false&lt;/_x003C_TurnOffAddSegmentExecution_x003E_k__BackingField&gt;&lt;d8p1:Code /&gt;&lt;d8p1:SelectorType&gt;Constant&lt;/d8p1:SelectorType&gt;&lt;d8p1:Semantic&gt;Multicast&lt;/d8p1:Semantic&gt;&lt;d8p1:Timeout&gt;0&lt;/d8p1:Timeout&gt;&lt;d8p1:Topic&gt;Orders.Processing&lt;/d8p1:Topic&gt;&lt;d8p1:TopicSelector i:type="d8p1:ESBMessageConstTopicSelector"&gt;&lt;d8p1:Topic&gt;Orders.Processing&lt;/d8p1:Topic&gt;&lt;/d8p1:TopicSelector&gt;&lt;/ESBMessagePipelineStep&gt;&lt;/Children&gt;&lt;Condition&gt;&lt;Code&gt;int counter = (int)context.Properties["counter"];
int nodeCount = (int)context.Properties["nodeCount"];
return counter &amp;lt; nodeCount;&lt;/Code&gt;&lt;ReferencedAssemblies xmlns:d8p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"&gt;&lt;d8p1:string&gt;Neuron&lt;/d8p1:string&gt;&lt;d8p1:string&gt;Neuron.NetX&lt;/d8p1:string&gt;&lt;d8p1:string&gt;Neuron.Pipelines.Activities&lt;/d8p1:string&gt;&lt;d8p1:string&gt;Neuron.Pipelines.Activities2&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Runtime, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Linq, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Linq.Queryable, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Linq.Expressions, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Xml.ReaderWriter, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Xml.XDocument, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Data.Common, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Runtime.Serialization.Primitives, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Collections, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Collections.NonGeneric, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Private.Xml, Version=8.0.0.0, Culture=neutral, PublicKeyToken=cc7b13ffcd2ddd51&lt;/d8p1:string&gt;&lt;d8p1:string&gt;Microsoft.CSharp, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d8p1:string&gt;&lt;d8p1:string&gt;Newtonsoft.Json, Version=13.0.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed&lt;/d8p1:string&gt;&lt;d8p1:string&gt;Neuron.Metabase.Admin, Version=1.0.0.0, Culture=neutral, PublicKeyToken=ed764b6eccb2f6cc&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Runtime.Serialization.Xml, Version=0.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Private.DataContractSerialization, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.ComponentModel.Primitives, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Linq.Queryable, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Linq.Queryable, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d8p1:string&gt;&lt;/ReferencedAssemblies&gt;&lt;/Condition&gt;&lt;Initializer&gt;&lt;Code&gt;System.Collections.Generic.List&amp;lt;String&amp;gt; emailAddresses = (System.Collections.Generic.List&amp;lt;String&amp;gt;)context.Properties["EmailAddresses"];
int nodeCount = emailAddresses.Count;
context.Properties.Add("nodeCount", nodeCount);
context.Properties.Add("counter", 0);&lt;/Code&gt;&lt;ReferencedAssemblies xmlns:d8p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"&gt;&lt;d8p1:string&gt;Neuron&lt;/d8p1:string&gt;&lt;d8p1:string&gt;Neuron.NetX&lt;/d8p1:string&gt;&lt;d8p1:string&gt;Neuron.Pipelines.Activities&lt;/d8p1:string&gt;&lt;d8p1:string&gt;Neuron.Pipelines.Activities2&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Runtime, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Linq, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Linq.Queryable, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Linq.Expressions, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Xml.ReaderWriter, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Xml.XDocument, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Data.Common, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Runtime.Serialization.Primitives, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Collections, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Collections.NonGeneric, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Private.Xml, Version=8.0.0.0, Culture=neutral, PublicKeyToken=cc7b13ffcd2ddd51&lt;/d8p1:string&gt;&lt;d8p1:string&gt;Microsoft.CSharp, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d8p1:string&gt;&lt;d8p1:string&gt;Newtonsoft.Json, Version=13.0.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed&lt;/d8p1:string&gt;&lt;d8p1:string&gt;Neuron.Metabase.Admin, Version=1.0.0.0, Culture=neutral, PublicKeyToken=ed764b6eccb2f6cc&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Runtime.Serialization.Xml, Version=0.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Private.DataContractSerialization, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.ComponentModel.Primitives, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Linq.Queryable, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Linq.Queryable, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d8p1:string&gt;&lt;/ReferencedAssemblies&gt;&lt;/Initializer&gt;&lt;Iterator&gt;&lt;Code&gt;int counter = (int)context.Properties["counter"] + 1;
context.Properties["counter"] = counter;&lt;/Code&gt;&lt;ReferencedAssemblies xmlns:d8p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"&gt;&lt;d8p1:string&gt;Neuron&lt;/d8p1:string&gt;&lt;d8p1:string&gt;Neuron.NetX&lt;/d8p1:string&gt;&lt;d8p1:string&gt;Neuron.Pipelines.Activities&lt;/d8p1:string&gt;&lt;d8p1:string&gt;Neuron.Pipelines.Activities2&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Runtime, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Linq, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Linq.Queryable, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Linq.Expressions, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Xml.ReaderWriter, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Xml.XDocument, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Data.Common, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Runtime.Serialization.Primitives, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Collections, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Collections.NonGeneric, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Private.Xml, Version=8.0.0.0, Culture=neutral, PublicKeyToken=cc7b13ffcd2ddd51&lt;/d8p1:string&gt;&lt;d8p1:string&gt;Microsoft.CSharp, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d8p1:string&gt;&lt;d8p1:string&gt;Newtonsoft.Json, Version=13.0.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed&lt;/d8p1:string&gt;&lt;d8p1:string&gt;Neuron.Metabase.Admin, Version=1.0.0.0, Culture=neutral, PublicKeyToken=ed764b6eccb2f6cc&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Runtime.Serialization.Xml, Version=0.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Private.DataContractSerialization, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.ComponentModel.Primitives, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Linq.Queryable, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d8p1:string&gt;&lt;d8p1:string&gt;System.Linq.Queryable, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d8p1:string&gt;&lt;/ReferencedAssemblies&gt;&lt;/Iterator&gt;&lt;TurnOffTrackExecution&gt;false&lt;/TurnOffTrackExecution&gt;&lt;/ESBMessagePipelineStep&gt;&lt;/Children&gt;&lt;/Try&gt;&lt;/ESBMessagePipelineStep&gt;&lt;/Steps&gt;&lt;/ESBMessagePipeline&gt;</PipelineBlob>
  <IsProcessFlow>false</IsProcessFlow>
</ESBMessagePipelineStorage>